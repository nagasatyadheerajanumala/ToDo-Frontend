{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Box,Button,Card,CardContent,Grid,TextField,Typography}from'@mui/material';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProjectList(){const[projects,setProjects]=useState([]);const[projectName,setProjectName]=useState('');const token=localStorage.getItem('jwtToken');const fetchProjects=async()=>{try{const response=await fetch('http://localhost:8080/api/projects',{headers:{Authorization:`Bearer ${token}`}});if(!response.ok)throw new Error(`Failed to fetch projects: ${response.statusText}`);const data=await response.json();setProjects(data);console.log('Fetched projects:',data);}catch(error){console.error('Error fetching projects:',error);}};useEffect(()=>{fetchProjects();},[]);const createProject=async e=>{e.preventDefault();console.log('Creating project with name:',projectName);const token=localStorage.getItem('jwtToken');if(!token){console.error('JWT token is missing.');return;}const url=`http://localhost:8080/api/projects?name=${encodeURIComponent(projectName)}`;console.log('POST URL:',url);try{const response=await fetch(url,{method:'POST',headers:{Authorization:`Bearer ${token}`}});console.log('Response status:',response.status);if(!response.ok){const errorText=await response.text();throw new Error(`Project creation failed: ${response.status} ${errorText}`);}const newProject=await response.json();console.log('Project created successfully:',newProject);setProjectName('');fetchProjects();// Refresh list\n}catch(error){console.error('Error creating project:',error);}};return/*#__PURE__*/_jsxs(Box,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Your Projects\"}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:createProject,sx:{mb:4,display:'flex',gap:2},children:[/*#__PURE__*/_jsx(TextField,{label:\"Project Name\",variant:\"outlined\",value:projectName,onChange:e=>setProjectName(e.target.value),required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",children:\"Create Project\"})]}),projects.length===0?/*#__PURE__*/_jsx(Typography,{children:\"No projects available. Create one!\"}):/*#__PURE__*/_jsx(Grid,{container:true,spacing:2,children:projects.map(project=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:project.name}),project.owner&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Owner: \",project.owner.username]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",component:Link,to:`/projects/${project.id}`,sx:{mt:2},children:\"Open Project\"})]})})},project.id))})]});}export default ProjectList;","map":{"version":3,"names":["React","useEffect","useState","Box","Button","Card","CardContent","Grid","TextField","Typography","Link","jsx","_jsx","jsxs","_jsxs","ProjectList","projects","setProjects","projectName","setProjectName","token","localStorage","getItem","fetchProjects","response","fetch","headers","Authorization","ok","Error","statusText","data","json","console","log","error","createProject","e","preventDefault","url","encodeURIComponent","method","status","errorText","text","newProject","sx","p","children","variant","gutterBottom","component","onSubmit","mb","display","gap","label","value","onChange","target","required","type","color","length","container","spacing","map","project","item","xs","md","name","owner","username","to","id","mt"],"sources":["/Users/dheeraj/Desktop/To-Do App/frontned/ToDo-Frontend/src/components/Projects/ProjectList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Box, Button, Card, CardContent, Grid, TextField, Typography } from '@mui/material';\nimport { Link } from 'react-router-dom';\n\nfunction ProjectList() {\n  const [projects, setProjects] = useState([]);\n  const [projectName, setProjectName] = useState('');\n  const token = localStorage.getItem('jwtToken');\n\n  const fetchProjects = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/projects', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      if (!response.ok) throw new Error(`Failed to fetch projects: ${response.statusText}`);\n      const data = await response.json();\n      setProjects(data);\n      console.log('Fetched projects:', data);\n    } catch (error) {\n      console.error('Error fetching projects:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchProjects();\n  }, []);\n\n  const createProject = async (e) => {\n    e.preventDefault();\n    console.log('Creating project with name:', projectName);\n    const token = localStorage.getItem('jwtToken');\n    if (!token) {\n      console.error('JWT token is missing.');\n      return;\n    }\n    const url = `http://localhost:8080/api/projects?name=${encodeURIComponent(projectName)}`;\n    console.log('POST URL:', url);\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      console.log('Response status:', response.status);\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`Project creation failed: ${response.status} ${errorText}`);\n      }\n      const newProject = await response.json();\n      console.log('Project created successfully:', newProject);\n      setProjectName('');\n      fetchProjects(); // Refresh list\n    } catch (error) {\n      console.error('Error creating project:', error);\n    }\n  };\n\n  return (\n    <Box sx={{ p: 2 }}>\n      <Typography variant=\"h5\" gutterBottom>\n        Your Projects\n      </Typography>\n      {/* Form to create a new project */}\n      <Box component=\"form\" onSubmit={createProject} sx={{ mb: 4, display: 'flex', gap: 2 }}>\n        <TextField\n          label=\"Project Name\"\n          variant=\"outlined\"\n          value={projectName}\n          onChange={(e) => setProjectName(e.target.value)}\n          required\n        />\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n          Create Project\n        </Button>\n      </Box>\n      {projects.length === 0 ? (\n        <Typography>No projects available. Create one!</Typography>\n      ) : (\n        <Grid container spacing={2}>\n          {projects.map((project) => (\n            <Grid item xs={12} md={6} key={project.id}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\">{project.name}</Typography>\n                  {project.owner && (\n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      Owner: {project.owner.username}\n                    </Typography>\n                  )}\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    component={Link}\n                    to={`/projects/${project.id}`}\n                    sx={{ mt: 2 }}\n                  >\n                    Open Project\n                  </Button>\n                </CardContent>\n              </Card>\n            </Grid>\n          ))}\n        </Grid>\n      )}\n    </Box>\n  );\n}\n\nexport default ProjectList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}